<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Fitness With Gomzi - Login</title>
    <meta name="description" content="A responsive bootstrap 4 admin dashboard template by hencework" />

    <!-- Favicon -->
    <link rel="shortcut icon" href="dist/img/favi.ico">
    <link rel="icon" href="dist/img/favi.ico" type="image/x-icon">

    <!-- Custom CSS -->
    <link href="dist/css/style.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="dist/css/fontawesome-free/css/all.min.css">

    <!-- Toastr CSS -->
    <link href="dist/vendors4/jquery-toast-plugin/dist/jquery.toast.min.css" rel="stylesheet" type="text/css">

    <!-- Pace -->
    <link rel="stylesheet" href="dist/vendors4/pace-progress/themes/blue/pace-theme-minimal.css">
</head>

<body>


    <!-- HK Wrapper -->
    <div class="hk-wrapper">

        <!-- Main Content -->
        <div class="hk-pg-wrapper hk-auth-wrapper">
            <header class="d-flex pb-0 mt-0 mt-sm-0">
                <a class="d-flex auth-brand align-items-center justify-content-start justify-content-sm-center justify-content-lg-end"
                    href="https://fitnesswithgomzi.com" target="_blank">
                    <img class="brand-img d-inline-block mr-5 w-15 w-sm-10 w-md-10 w-lg-5" src="dist/img/logo.png"
                        alt="brand" />
                </a>
                <!-- <div class="btn-group btn-group-sm">
                    <a href="#" class="btn btn-outline-secondary">Help</a>
                    <a href="#" class="btn btn-outline-secondary">About Us</a>
                </div> -->
            </header>
            <div class="container-fluid">
                <div class="row">
                    <div class="col-lg-6 pa-0 order-2 order-sm-2 order-md-1">
                        <div class="fadeOut auth-cover-img overlay-wrap mr-0 img-none forhight"
                            style="background-image:url(dist/img/login/bg3.jpg);">
                            <div class="bg-overlay bg-trans-dark-10"></div>
                        </div>
                    </div>
                    <div class="col-lg-6 pa-0 order-1 order-sm-1 order-md-2">
                        <div class="auth-form-wrap fadeOut auth-cover-img overlay-wrap forhight"
                            style="background-image:url(dist/img/login/right-side-bg.jpg);">
                            <div class="auth-form glass-img w-xxl-65 w-xl-65 w-sm-90 w-xs-100">
                                <form id="form_login">
                                    <h1 class="display-5 mb-5 text-white">Admin Login <i class="fa fa-arrow-right"
                                            style="font-size:30px;"></i> </h1><br>
                                    <div class="form-group">
                                        <input class="form-control" id="txt_email" placeholder="Email or Mobile no."
                                            type="email">
                                    </div>
                                    <div class="form-group">
                                        <div class="input-group">
                                            <input class="form-control" id="txt_password" placeholder="Password"
                                                type="password">
                                        </div>
                                    </div>
                                    <!-- <div class="custom-control custom-checkbox mb-25">
                                        <input class="custom-control-input" id="same-address" type="checkbox" checked>
                                        <label class="custom-control-label font-14" for="same-address">Keep me logged in</label>
                                    </div> -->
                                    <a href="javascript:void(0)" class="btn bg-white text-danger btn-block col-md-8"
                                        id="btn_login">Login</a>
                                    <!-- <a href="register.html" class="btn btn-primary btn-block col-md-8">Sign Up</a> -->
                                    <!-- <div class="option-sep">or</div>
                                    <div class="form-row">
                                        <div class="col-sm-6 mb-20">
                                            <button class="btn btn-indigo btn-block btn-wth-icon"> <span class="icon-label"><i class="fa fa-facebook"></i> </span><span class="btn-text">Login with facebook</span></button>
                                        </div>
                                        <div class="col-sm-6 mb-20">
                                            <button class="btn btn-primary btn-block btn-wth-icon"> <span class="icon-label"><i class="fa fa-twitter"></i> </span><span class="btn-text">Login with Twitter</span></button>
                                        </div>
                                    </div>
                                    <p class="text-center">Do have an account yet? <a href="#">Sign Up</a></p> -->
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- /Main Content -->

    </div>
    <!-- /HK Wrapper -->

    <!-- jQuery -->
    <script src="dist/vendors4/jquery/dist/jquery.min.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="dist/vendors4/popper.js/dist/umd/popper.min.js"></script>
    <script src="dist/vendors4/bootstrap/dist/js/bootstrap.min.js"></script>

    <!-- Slimscroll JavaScript -->
    <script src="dist/js/jquery.slimscroll.js"></script>

    <!-- Fancy Dropdown JS -->
    <script src="dist/js/dropdown-bootstrap-extended.js"></script>

    <!-- Owl JavaScript -->
    <script src="dist/vendors4/owl.carousel/dist/owl.carousel.min.js"></script>

    <!-- Toastr JS -->
    <script src="dist/vendors4/jquery-toast-plugin/dist/jquery.toast.min.js"></script>

    <!-- Toggles JavaScript -->
    <script src="dist/vendors4/jquery-toggles/toggles.min.js"></script>
    <script src="dist/js/toggle-data.js"></script>

    <!-- FeatherIcons JavaScript -->
    <script src="dist/js/feather.min.js"></script>

    <!-- Init JavaScript -->
    <script src="dist/js/init.js"></script>
    <script src="dist/js/login-data.js"></script>
    <script src="dist/app.js"></script>

</body>

<script>
    $('#txt_email').focus();

    if (localStorage.getItem("authorization")) {
        window.location.href = 'index.html'
    }

    // Common error handler
    function handleError(error) {
        console.log(error);
        // Handle the error, such as showing a notification or redirecting to login
    }

    $("#btn_login").click(() => {
        var email = $("#txt_email").val(),
            password = $("#txt_password").val(),
            regex_email = /^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/

        if (!email || !password) {
            return toastError('Required', 'Email and Password are required')
        }

        $.post({
            url: 'api-all-admins.gcsconsultant.com/admin/login',
            contentType: 'application/json',
            data: JSON.stringify({
                "email": email,
                "password": password
            }),
            success: result => {
                var result = result.data
                localStorage.setItem("authorization", result.authorization);
                // get profile
                $.get({
                    url: `api-all-admins.gcsconsultant.com/admin/get-profile`,
                    dataType: 'json',
                    headers: {
                        "authorization": `${result.authorization}`,
                    },
                    success: (result) => {
                        var result = result.data;
                        localStorage.setItem('type', JSON.stringify(result.type));
                        window.location.href = 'index.html'
                    },
                    error: (error) => {
                        if (error.responseJSON) {
                            if (error.responseJSON.status == 401)
                                toastrError('Error', 'Please login again');
                        }

                        return logout();
                    }
                });
            },
            error: error => error.responseJSON ? toastError('Error', error.responseJSON.message) : toastError(),
            beforeSend: () => {
                $("#btn_login").attr('disabled', true)
            },
            complete: () => {
                $("#btn_login").removeAttr('disabled')
            }
        });
    })

    //Form Submit
    $("#form_login").keydown(function (e) {
        if (e.keyCode == 13) {
            $('#btn_login').click();
        }
    });
</script>

</html>